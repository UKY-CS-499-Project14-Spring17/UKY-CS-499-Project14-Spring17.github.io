---
title: Software Design
---

# Portable Laser Engravers Interface Design

### Overview
<!-- This can be taken from the requirements and modified as necessary. For a design document you can assume the reader has a technical background. For your projects assume a background of a class member. -->

The [HTPOW brand](https://www.amazon.com/HTPOW-Engraver-Printer-Handicraft-Engraving/dp/B01G36Q558) of laser engravers have a (somewhat) unique protocol for communicating between the computer and the engraver. There is software available for using the engravers, but it only runs on Windows and is not compatible with [Wine](https://www.winehq.org/). Our goal is to examine and replicate the features of this Windows software in a command-line interface so that engraving can be better automated and will work nicely in Linux, Windows, and Mac environments.

### Environment

<!-- List any requirements (operating system, database products, execution environment (Java, Perl, etc.). -->

Our engraving software is written in C++ <!-- TODO --> and needs a gcc compiler. It has been tested in Ubuntu 14.04 and 16.04, gcc version 5.2.1. Although not guaranteed, this code should be able to compile on any Linux/Unix system with a gcc compiler, possibly including Mac OS X.

This software depends on the following libraries, which are linked or available through the GNU Standard Library: <!-- TODO -->

### Module Descriptions and Data Flow

<!--Include a diagram showing the modules and data flow between them. Give a high level description of the function of each module. A pseudo-code format is often used:

```
Open grades file
While grades for student in file {
  If valid grade (0-100)
    Add grade to student total
  else  {
    Report error to user screen
    Create error report for history
  } 
}
```

Describe the data going into and out of the modules, using structures as necessary. -->

<!-- TODO a module diagram might be nice -->

#### Bitmap (.bmp) Format
```
	Interpret CLI options
	Read in bitmap file
	<< Enhancement: Analyze bitmap for contiguous regions >>
	Test connection to serial port
	Activate engraver
	while( there are regions to engrave ) do
		while( there are pixels to engrave in this region ) do
			<< Enhancement: Greyscale settings: Set laser intensity >>
			Move laser to next pixel
		end
		Travel to next region
		Alert user, bitmap complete
	end
```

<!-- TODO #### G-code (.mpt) Format
```
``` -->

### User Screens

<!-- Include user screens with description of function and use. -->
```
htpewpew: a CLI for serial communication to a HTPOW laser engraver
usage: htpewpew image [options] 
  -b, --max-burn-time t     Set the maximum burn time (default = ? ms)
  -d, --dry-run             Show engraving box and do not engrave
  -i, --max-intensity s     Set the maximum burn intensity (default = ?)
  -o, --output image        Store the altered image at this location
  -p, --port port-num       Send the file to this serial port.
  -t, --bw, --threshold x%  Use a threshold with x% (default = 50%)
  -x, --x-offset x          Set x offset for image
  -y, --y-offset y          Set y offset for image
  -h, --help                Display this help message and quit.
```

### User Scenarios (Use Cases)

<!-- Include the typical steps a user would do for major functions:

1.    When the user starts the program the first screen appears shown above as “Main Menu” appears
2.    When the user selects option “Enter grades” the “Enter Grades” screen appears
3.    The user can enter grades by …. When finished the user …. 
4.    The report shown above as “Grade Report” is generated by …… -->

### Design Considerations

<!-- List any considerations that affected your design, for example functions you considered but cannot do because of time or system limitations, design decisions made because of customer requirements, etc. -->

### Sizing Estimate

<!-- Size estimates of modules, either lines of code, story points, or function points (see the Software Process and Project metrics slides). Note: Its accuracy will not affect your grade -->

### Documentation specific to your project

<!-- This is an outline of a generic project. Modify it to suite yours. The design document is used by the project members to complete the project and for technically competent readers to understand what you are doing. -->

### The Formal Development Environment (for reference)

<!-- In a formal project development environment, the design document is approved by the project manager and technical leaders responsible for development.

The design document can be changed if necessary during product development. However there usually is a procedure to do this (with appropriate approvals needed). When a design change is being considered, affected groups have to be notified and may have to approve. For example, if a design change affects the requirements approved by the customer, customer approval is necessary.

It is also recommended that testing groups participate and approve the design. Testing groups like the integration and system groups use the design document to create test cases.

For your projects, the customer does not have to approve the design document. However, anything in it that affects the customer (platform, user screens, etc.) must be approved. -->
